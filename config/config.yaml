# =============================================================================
# BESS Site Scout — Configuration
# ReDewable Energy — Internal Use
# =============================================================================

# --- Target Grid Parameters ---
grid:
  # Voltage range for target transmission lines (kV)
  voltage_min_kv: 161
  voltage_max_kv: 345
  # HIFLD voltage class values that fall in our range:
  #   "100-161" (captures 161kV), "220-287", "345"
  hifld_voltage_classes:
    - "100-161"
    - "220-287"
    - "345"
  # Geographic filter — state code (TX, CA, etc.) or "ALL" for nationwide
  state_filter: "ALL"
  # Substation search radius from transmission lines (miles)
  substation_buffer_miles: 2.0

# --- Real Estate Search Parameters ---
real_estate:
  # Search radius around each qualifying substation (miles)
  search_radius_miles: 3.0
  # Minimum parcel acreage for BESS development
  min_acres: 10
  # Maximum parcel acreage (cost control)
  max_acres: 500
  # Maximum price per acre (USD)
  max_price_per_acre: 50000
  # Preferred land use / zoning types
  preferred_land_use:
    - "agricultural"
    - "vacant"
    - "rural"
    - "industrial"
    - "commercial"
  # Exclude these land use types
  excluded_land_use:
    - "residential"
    - "parkland"
    - "cemetery"
    - "school"
    - "government"

# --- Environmental Screening Parameters ---
# Search radii match ASTM E1527-21 Phase I ESA standard distances
environmental:
  # FEMA Flood
  flood:
    # Zones that trigger elimination
    eliminate_zones: ["A", "AE", "AH", "AO", "AR", "V", "VE"]
    # Zones that trigger warning
    warning_zones: ["X_SHADED", "D"]
    # Max % of parcel in floodplain before elimination
    max_floodplain_pct: 25

  # EPA Federal databases — search radii in miles
  epa:
    npl_radius: 1.0          # Superfund NPL sites
    cerclis_radius: 0.5      # CERCLIS/SEMS sites
    rcra_tsd_radius: 1.0     # RCRA TSD facilities
    rcra_gen_radius: 0.25    # RCRA generators
    erns_radius: 0.25        # Emergency response
    brownfields_radius: 0.5  # Brownfields sites

  # TCEQ Texas state databases — search radii in miles
  tceq:
    lpst_radius: 0.5         # Leaking petroleum storage tanks
    ust_radius: 0.25         # Underground storage tanks
    ihw_radius: 0.5          # Industrial & hazardous waste
    msw_radius: 1.0          # Municipal solid waste / landfills
    spills_radius: 0.25      # Reported spills
    drycleaners_radius: 0.25 # Dry cleaner sites (perc)

  # USFWS
  wetlands:
    flag_on_intersection: true
    max_wetland_pct: 50

  endangered_species:
    flag_on_intersection: true
    eliminate: false

  # TX Railroad Commission
  rrc:
    well_radius: 0.25
    pipeline_radius: 0.1

# --- Generation Assets ---
# Tracks ALL generation assets: operating, planned, and queued
generation_assets:
  # EIA-860M — comprehensive US power plant inventory
  eia:
    enabled: true
    # Status codes to include:
    #   OP=Operating, SB=Standby, OA/OS=Out of service,
    #   P=Planned, L=Reg approved, T/U=Under construction, V=Testing
    include_statuses: ["OP", "SB", "TS", "OA", "OS", "P", "L", "T", "U", "V"]
    # Radius for per-site nearby plant queries (miles)
    search_radius_miles: 25

  # ISO/RTO Interconnection Queues — proposed projects seeking grid access
  interconnection_queues:
    enabled: true
    # ISOs to query (all 7 major US ISOs)
    isos: ["ERCOT", "CAISO", "PJM", "MISO", "SPP", "NYISO", "ISONE"]
    # Only include projects with these statuses
    include_statuses: ["Active", "Under Study", "Facility Study", "IA Executed", "IA in Progress", "Under Construction"]

  # EPA eGRID — emissions & generation data for existing plants
  egrid:
    enabled: true
    data_year: 2022  # Latest available eGRID year

# --- Market & Revenue Data ---
# Wholesale electricity market data for BESS revenue modeling
market_data:
  lmp:
    enabled: true
    days_back: 30  # Days of LMP history to fetch
    isos: ["ERCOT", "CAISO", "PJM", "MISO", "NYISO", "SPP"]
  congestion:
    enabled: true
  capacity_markets:
    enabled: true
  ancillary_services:
    enabled: true
  curtailment:
    enabled: true

# --- Site Feasibility ---
site_feasibility:
  land_use:
    enabled: true  # USGS NLCD 30m land cover
  parcels:
    enabled: true  # Regrid (free) + ATTOM (paid, optional)
  utility_territories:
    enabled: true  # HIFLD service territories
  incentives:
    enabled: true  # Federal ITC + state programs + energy communities
  soil:
    enabled: true  # USDA SSURGO soil data

# --- Grid & Renewables Assessment ---
grid_assessment:
  # EIA power plant search radius (miles)
  plant_search_radius: 15.0
  # NREL solar resource — co-location analysis
  solar_resource: true

# --- Scoring Weights ---
scoring:
  # Weights must sum to 1.0
  proximity_to_substation: 0.25  # Closer = better
  voltage_class: 0.15            # Higher voltage = better
  environmental_risk: 0.20       # Lower risk = better
  land_cost: 0.10                # Lower cost = better
  parcel_size: 0.05              # Closer to ideal size = better
  flood_risk: 0.05               # Lower risk = better
  grid_density: 0.10             # More nearby generation = better infra
  solar_resource: 0.10           # Higher GHI = better co-location

  # Ideal parcel size for scoring (acres)
  ideal_parcel_acres: 40

# --- Output ---
output:
  report_dir: "./output"
  generate_map: true
  generate_excel: true
  generate_pdf: false
  top_n_results: 100

# --- API Keys (optional — most sources are free) ---
api_keys:
  # NREL Developer API (free: https://developer.nrel.gov/)
  nrel: "DEMO_KEY"
  # EIA Open Data (free: https://www.eia.gov/opendata/)
  eia: "4TZIfYW6RisbK2tvVioq6MRiLe7qdLVi5U8nMFM4"
  # RentCast API (freemium — 50 calls/month free)
  rentcast: ""
  # ATTOM Data (premium — if you want parcel boundaries)
  attom: ""
  # PJM API key (free — for interconnection queue data)
  pjm: ""

# --- Cache Settings ---
cache:
  enabled: true
  directory: "./data/cache"
  grid_data_expiry_hours: 720      # 30 days
  environmental_expiry_hours: 168  # 7 days
  real_estate_expiry_hours: 24     # 1 day
